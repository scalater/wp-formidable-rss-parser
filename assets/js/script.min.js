var formidableRSSParserData,formidableRSSParserInstance={setShowData:function(e){formidableRSSParserData=e},getShowData:function(){return formidableRSSParserData},validateURL:function(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},showSubmitLoading:function(e){formidableRSSParserInstance.showLoadingIndicator(e),formidableRSSParserInstance.disableSubmitButton(e),formidableRSSParserInstance.disableSaveDraft(e)},showLoadingIndicator:function(e){e.hasClass("frm_loading_form")||e.hasClass("frm_loading_prev")||(formidableRSSParserInstance.addLoadingClass(e),e.trigger("frmStartFormLoading"))},disableSubmitButton:function(e){e.find('input[type="submit"], input[type="button"], button[type="submit"]').attr("disabled","disabled")},disableSaveDraft:function(e){e.find("a.frm_save_draft").css("pointer-events","none")},enableSaveDraft:function(e){e.find("a.frm_save_draft").css("pointer-events","")},enableSubmitButton:function(e){e.find('input[type="submit"], input[type="button"], button[type="submit"]').prop("disabled",!1)},addLoadingClass:function(e){e.addClass("frm_loading_form")},removeSubmitLoading:function(e,r,a){var t;a>0||((t=jQuery(".frm_loading_form")).removeClass("frm_loading_form"),t.removeClass("frm_loading_prev"),t.trigger("frmEndFormLoading"),"enable"===r&&(formidableRSSParserInstance.enableSubmitButton(t),formidableRSSParserInstance.enableSaveDraft(t)))},addFieldError:function(e,r,a){var t,n,o;e.length&&e.is(":visible")&&(e.addClass("frm_blank_field"),n="frm_error_field_"+r,o=(t=e.find("input, select, textarea")).attr("aria-describedby"),e.append('<div class="frm_error" id="'+n+'">'+a[r]+"</div>"),void 0===o?o=n:-1===o.indexOf(n)&&(o=o+" "+n),t.attr("aria-describedby",o)),t.attr("aria-invalid",!0),jQuery(document).trigger("frmAddFieldError",[e,r,a])},removeFieldError:function(e){var r=e.find(".frm_error"),a=r.attr("id"),t=e.find("input, select, textarea"),n=t.attr("aria-describedby");e.removeClass("frm_blank_field has-error"),r.remove(),t.attr("aria-invalid",!1),void 0!==n&&(n=n.replace(a,""),t.attr("aria-describedby",n))},shouldJSValidate:function(e){var r=jQuery(e).hasClass("frm_js_validate");return r&&"undefined"!=typeof frmProForm&&(frmProForm.savingDraft(e)||frmProForm.goingToPreviousPage(e))&&(r=!1),r},rssParser:function(e){if(!e)return;let r=jQuery("[data-parser-path]");r&&r.length>0&&jQuery.each(r,(function(r,a){let t=jQuery(a).attr("data-parser-path");if(t){let r=_.get(e,t);r&&jQuery(a).val(r)}}))},importAjax:function(e,r,a,t){jQuery.ajax({type:"POST",dataType:"json",url:wpHtmlCssToImageObj.admin_url,data:{action:"formidable_rss_parser_import",nonce:formidableRSSParserObj.nonce,data:e,selection:r},success:function(e){void 0,e&&e.success&&e.status&&a(e.status)},error:function(e,r,a){throw e.responseText},complete:function(){t()}})},rssAjax:function(e,r,a){jQuery.ajax({type:"POST",dataType:"json",url:wpHtmlCssToImageObj.admin_url,data:{action:"formidable_rss_parse",nonce:formidableRSSParserObj.nonce,url:e},success:function(e){void 0,e&&e.success&&e.data&&r(e.data)},error:function(e,r,a){throw e.responseText},complete:function(){a()}})},onRssKeyOut:function(e,r){var a;r||(r=500);var t=function(r){a&&(a=null,e(r))};return this.each((function(){var e=jQuery(this);e.on("keyup",(function(){a&&clearTimeout(a),a=setTimeout((function(){t(e)}),r)})).on("blur",(function(){t(e)}))})),this},initFormidableField:function(){let e=jQuery(".formidable-rss-parser-container");e&&e.length>0&&jQuery.each(e,(function(e,r){let a=jQuery(r),t=a.find(".formidable-rss-parser");if(t&&t.length>0){let e=t.attr("data-container-id"),r=(t.attr("data-field-id"),a.closest("#"+e));if(r&&r.length>0){let a="#frm_form_"+t.attr("data-form-id")+"_container form",n=jQuery(a);n&&n.length>0&&t.onRssKeyOut((function(a){var t=jQuery(a).val();if(t){if(formidableRSSParserInstance.showSubmitLoading(n),formidableRSSParserInstance.removeFieldError(r),formidableRSSParserInstance.validateURL(t))formidableRSSParserInstance.rssAjax(t,(function(e){e.shows&&(formidableRSSParserInstance.setShowData(e),formidableRSSParserInstance.rssParser(e.shows))}),(function(){formidableRSSParserInstance.removeSubmitLoading(n)}));else{let a=[];a[e]="Invalid RSS URL",formidableRSSParserInstance.addFieldError(r,e,a)}}}))}}}))},clearShortCodeInput:function(e,r){e&&(jQuery(e).val(""),r.find(".formidable-rss-result-show").hide(),r.find(".formidable-rss-result-episodes-container").hide())},shortCodeLoadingAdd:function(e){if(!e)return;let r=jQuery(e).text();jQuery(e).attr("data-default-text",r).text("Loading...").attr("disabled","disabled")},shortCodeLoadingRemove:function(e){if(!e)return;let r=jQuery(e).attr("data-default-text");jQuery(e).removeAttr("disabled"),jQuery(e).text(r)},onShortCodeSearch:function(e,r,a){void 0;const t=r.find("button.search-show");let n=jQuery(a).val();if(n){formidableRSSParserInstance.validateURL(n)?(formidableRSSParserInstance.shortCodeLoadingAdd(t),formidableRSSParserInstance.rssAjax(n,(function(e){if(e.count&&e.count>0&&e.shows){formidableRSSParserInstance.setShowData(e);let a=r.find(".formidable-rss-result-show");if(1===e.count){let r='<label class="element-list"><div class="element-image"><img src="'+e.shows.image.url+'" alt="'+e.shows.image.title+'"></div><div class="element-details"><div class="element-title">'+e.shows.title+'</div><div class="element-sub-details"><span class="element-author">'+e.shows.title+'</span><span class="element-separator">&centerdot;</span><span class="element-episode-amount">'+e.shows.item.length+"</span></div></div></label>";a.html("").html(r)}}}),(function(){formidableRSSParserInstance.shortCodeLoadingRemove(t),r.find(".formidable-rss-result-show").show(),r.find(".formidable-rss-result-episodes-container").hide()}))):void 0}else void 0},onShortCodeShowClick:function(e,r){void 0;const a=r.find("button.search-show");let t=formidableRSSParserInstance.getShowData();if(!(t&&t.shows&&t.shows.item))throw"No data detected or episodes items";formidableRSSParserInstance.shortCodeLoadingAdd(a),window.setTimeout((function(){let e=r.find(".formidable-rss-result-episodes-container .episode-image"),n=r.find(".formidable-rss-result-episodes-container .episodes-list");e.attr("src",t.shows.image.url),n.html(""),jQuery.each(t.shows.item,(function(e,r){let a=new Date(r.timestamp);let t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]+" "+a.getDate()+", "+a.getFullYear(),o='<label class="element-list"><div class="element-left"><input type="checkbox" name="lorem" value="'+e+'"></div><div class="element-details"><span class="element-title">'+r.title+'</span><div class="element-sub-details"><span class="element-date">'+t+'</span><span class="element-separator">&centerdot;</span><span class="element-duration">'+r["itunes:duration"]+"</span></div></div></label>";n.append(o)})),formidableRSSParserInstance.shortCodeLoadingRemove(a),r.find(".formidable-rss-result-show").hide(),r.find(".formidable-rss-result-episodes-container").show()}),500)},onShortCodeImport:function(e,r){const a=r.find("button.search-show");let t=r.find('.formidable-rss-result-episodes label.element-list input[type="checkbox"]:checked'),n=formidableRSSParserInstance.getShowData();n&&n.shows&&n.shows.item&&(formidableRSSParserInstance.shortCodeLoadingAdd(a),formidableRSSParserInstance.importAjax(n,t,(function(e){void 0}),(function(){formidableRSSParserInstance.shortCodeLoadingRemove(a)})))},initShortCode:function(){let e=jQuery(".formidable-rss-parser-container-shortcode");e&&e.length>0&&jQuery.each(e,(function(e,r){let a=jQuery(r),t=a.find(".formidable-rss-parser");if(t&&t.length>0){t.attr("data-form-id-show"),t.attr("data-form-id-episode"),t.attr("data-type");jQuery(document).on("click",".formidable-rss-parser-container-shortcode .formidable-rss-result-show label.element-list",(function(e){formidableRSSParserInstance.onShortCodeShowClick(e,a)})),jQuery(document).on("click",".formidable-rss-parser-container-shortcode .search-container button.search-show",(function(e){formidableRSSParserInstance.onShortCodeSearch(e,a,t)})),jQuery(document).on("click",".formidable-rss-parser-container-shortcode .formidable-rss-result-episodes-container button.import-episodes",(function(e){formidableRSSParserInstance.onShortCodeImport(e,a)})),jQuery(document).on("click",".formidable-rss-parser-container-shortcode .clear-input",(function(e){formidableRSSParserInstance.clearShortCodeInput(t,a)}))}}))},init:function(){jQuery.fn.onRssKeyOut=formidableRSSParserInstance.onRssKeyOut,formidableRSSParserInstance.initFormidableField(),formidableRSSParserInstance.initShortCode()}};try{jQuery(document).ready((function(){formidableRSSParserInstance.init()}))}catch(e){void 0}